# 复合和转发

---

## 场景
~~~text
当上游父类存在不确定性导致依赖脆弱的时候
复合和转发优先于单纯的继承
(实际类似于依赖注入加继承)
~~~

## 示例
~~~java
/**
 * 第十八章
 * 针对继承所存在的缺陷,
 * 假设覆盖了1方法,2方法没有覆盖,这时候1还依赖2的话,对于1的覆盖代码实际上是非常脆弱的,
 * 上游类的逻辑更偏向于自用,而不是被覆盖调整
 * 所以推荐使用复合和转发
 */
public class UseBetterThanOverride {

    /**
     * 这一层只是复用逻辑
     */
    public static class DemoB extends DemoA{

        private final DemoA demoA;

        public DemoB(DemoA demoA) {
            this.demoA = demoA;
        }

        /**
         *  这时候就是复用,
         * @return
         */
        public DemoA runNext(){

            // 这里就是转发
            return demoA.runNext();
        }
    }

    /**
     * 这一层才是真正的转发部分
     */
    public static class DemoC extends DemoB{

        public DemoC(DemoA demoA) {
            super(demoA);
        }

        public DemoA runNext(){

            return super.runNext();
        }
    }
}

~~~