#定期归档

---

> @author zhangs

## 定义
> 归档定义接近于备份,更多的时候是把数据做一个备份,以便恢复.<br>
> 而归档的定义更接近于把数据精细化去做冷热处理.

## 场景
* 单表数据很大.查询很慢.
    * 注.1. 历史数据的有效性不是很高.可能就确实没用
    * 注.2. 对于历史数据是做转义还是想办法分表使数据更精细化,暂时不确认
    * 注.3. 存在一部分json字段,json字段走函数查询很慢.

* 目的:提高查询速度
    * 处理历史数据
    * 每天固定的量级如果保证查询速度
    * json字段的处理
## 思路

~~~text
1. json字段映射到外部,查询走外部字段,序列化还是直接处理json.方便查询和返回给前端,省了组装的代码
2. 历史数据以周为单位进行备份,超过固定月份的数据从备份数据中移除,参考华为云数据备份SAP
3. 找业务线确认历史数据有用还是没用.能的话历史数据还是备份掉从业务库迁移出去.
~~~       

## 参考
> 主要来自华为云
### 华为云

1.[数据备份方案](https://support.huaweicloud.com/bestpractice-sap/sap_08_0116.html)
 华为云针对自家的弹性文件服务（SFS）、对象存储服务（OBS）、云硬盘备份服务（VBS）、云服务器备份服务（CSBS）当做备份工具.
 提供较为廉价的对象存储服务.
    